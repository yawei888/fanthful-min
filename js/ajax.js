"use strict";function ajax(t){if(!t.url)throw new Error("url是必填参数");var e,r={type:"get",data:"",async:!0,success:function(){}};for(e in t)r[e]=t[e];if(!/^(get|post)$/i.test(r.type))throw new Error("暂时只支持get 和post请求");if(!("string"==typeof r.data&&/^(\w+=\w+&?)*$/.test(r.data)||"[object Object]"==Object.prototype.toString.call(r.data)))throw new Error("data参数只支持key=vlue 或者对象");var a="";if("[object Object]"==Object.prototype.toString.call(r.data))for(var o in r.data)a+=o+"="+r.data[o]+"&";if(r.data=a.slice(0,-1),"[object Function]"!==Object.prototype.toString.call(r.success))throw new Error("success 必须是一个函数");if("[object Boolean]"!==Object.prototype.toString.call(r.async))throw new Error("saync 只能是布尔值");try{xhr=new XMLHttpRequest}catch(t){xhr=new ActiveXObject("Microsoft.XMLHTTP")}/^(get)$/i.test(r.type)?(xhr.open(r.type,r.url+"?"+r.data,r.async),xhr.send()):(xhr.open(r.type,r.url,r.async),xhr.setRequestHeader("content-type","application/x-www-form-urlencoded"),xhr.send(r.data)),xhr.onreadystatechange=function(){/^2\d{2}$/.test(xhr.status)&&4===xhr.readyState&&r.success(xhr.responseText)}}function pAjax(r){return new Promise(function(e,t){ajax({url:r.url,data:r.data||"",type:r.type||"get",async:r.async||!0,success:function(t){e(JSON.parse(t))}})})}