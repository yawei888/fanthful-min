"use strict";var _createClass=function(){function e(t,i){for(var o=0;o<i.length;o++){var e=i[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var GVerify=function(){function i(t){_classCallCheck(this,i),this.options={id:t.id,canvasId:t.canvasId||"verifyCanvas",width:t.width||"100",height:t.height||"30",type:t.type||"blend",length:t.length||4,code:"",numArr:[1,2,3,4,5,6,7,8,9,0]},this.options.letterArr=this.getAllLetter(),this.init(),this.refresh()}return _createClass(i,[{key:"init",value:function(){var t=this,i=document.getElementById(this.options.id),o=document.createElement("canvas");this.options.width=0<i.offsetWidth?i.offsetWidth:this.options.width,this.options.height=0<i.offsetHeight?i.offsetHeight:this.options.height,o.id=this.options.canvasId,o.width=this.options.width,o.height=this.options.height,o.style.cursor="pointer",o.innerHTML="您的浏览器版本不支持canvas",i.appendChild(o),o.onclick=function(){t.refresh()}}},{key:"refresh",value:function(){this.options.code="";var t=document.getElementById(this.options.canvasId);if(t.getContext){var i,o=t.getContext("2d");o.textBaseline="middle",o.fillStyle=this.randomColor(180,240),o.fillRect(0,0,this.options.width,this.options.height),i="blend"==this.options.type?this.options.numArr.concat(this.options.letterArr):"number"==this.options.type?this.options.numArr:this.options.letterArr;for(var e=1;e<=this.options.length;e++){var n=i[this.randomNum(0,i.length)];this.options.code+=n,o.font=this.randomNum(this.options.height/2,this.options.height)+"px SimHei",o.fillStyle=this.randomColor(50,160),o.shadowOffsetX=this.randomNum(-3,3),o.shadowOffsetY=this.randomNum(-3,3),o.shadowBlur=this.randomNum(-3,3),o.shadowColor="rgba(0, 0, 0, 0.3)";var s=this.options.width/(this.options.length+1)*e,h=this.options.height/2,r=this.randomNum(-30,30);o.translate(s,h),o.rotate(r*Math.PI/180),o.fillText(n,0,0),o.rotate(-r*Math.PI/180),o.translate(-s,-h)}for(e=0;e<this.options.length;e++)o.strokeStyle=this.randomColor(40,180),o.beginPath(),o.moveTo(this.randomNum(0,this.options.width),this.randomNum(0,this.options.height)),o.lineTo(this.randomNum(0,this.options.width),this.randomNum(0,this.options.height)),o.stroke();for(e=0;e<this.options.width/this.options.length;e++)o.fillStyle=this.randomColor(0,255),o.beginPath(),o.arc(this.randomNum(0,this.options.width),this.randomNum(0,this.options.height),1,0,2*Math.PI),o.fill()}}},{key:"validate",value:function(t){return(t=t.toLowerCase())==this.options.code.toLowerCase()}},{key:"getAllLetter",value:function(){return"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z".split(",")}},{key:"randomNum",value:function(t,i){return Math.floor(Math.random()*(i-t)+t)}},{key:"randomColor",value:function(t,i){return"rgb("+this.randomNum(t,i)+","+this.randomNum(t,i)+","+this.randomNum(t,i)+")"}}]),i}();